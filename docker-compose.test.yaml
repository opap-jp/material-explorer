# テスト用 Docker 構成
version: "2"
services:
  # フロントエンド ウェブサーバー（開発用）
  web:
    build:
      context: web
      args:
        service_host: "http://localhost:8080"
    ports:
      - 80:80
  # REST サーバー（開発用）
  rest:
    command: "java -jar material-explorer.jar server config.test.yaml"
    build: rest
    ports:
      - "8080:8080"
    volumes:
      - ./temp/log/material-explorer:/var/log/material-explorer
      - ./temp/repositories:/tmp/material-explorer/temp/repositories
  # データベース
  db:
    image: mongo:3.4.9
    ports:
      - 27017:27017
    volumes:
      - data-volume:/data/db
  # ImageMagick
  im:
    build:
      context: im
volumes:
  data-volume:
